/**
 * List of known public Apple framework names.
 * Using one of these names for a module podspec will cause build conflicts on iOS.
 * @see https://developer.apple.com/documentation/technologies
 */
export const APPLE_FRAMEWORKS = new Set([
  'Accelerate',
  'Accessibility',
  'AccessorySetupKit',
  'Accounts',
  'ActivityKit',
  'AdAttributionKit',
  'AddressBook',
  'AddressBookUI',
  'AdServices',
  'AdSupport',
  'AlarmKit',
  'AppClips',
  'AppIntents',
  'AppTrackingTransparency',
  'AppKit',
  'AppleArchive',
  'ApplicationServices',
  'ARKit',
  'AssetsLibrary',
  'Assignables',
  'AudioToolbox',
  'AudioUnit',
  'AuthenticationServices',
  'AutomatedDeviceEnrollment',
  'AutomaticAssessmentConfiguration',
  'Automator',
  'AVFAudio',
  'AVFoundation',
  'AVKit',
  'AVRouting',
  'BackgroundAssets',
  'BackgroundTasks',
  'BrowserEngineCore',
  'BrowserEngineKit',
  'BrowserKit',
  'BundleResources',
  'CallKit',
  'CarKey',
  'CarPlay',
  'CFNetwork',
  'Cinematic',
  'ClassKit',
  'ClockKit',
  'CloudKit',
  'Collaboration',
  'ColorSync',
  'Combine',
  'CompositorServices',
  'Compression',
  'ContactProvider',
  'Contacts',
  'ContactsUI',
  'CoreAnimation',
  'CoreAudio',
  'CoreAudioKit',
  'CoreAudioTypes',
  'CoreBluetooth',
  'CoreData',
  'CoreFoundation',
  'CoreGraphics',
  'CoreHaptics',
  'CoreHID',
  'CoreImage',
  'CoreLocation',
  'CoreLocationUI',
  'CoreMedia',
  'CoreMediaIO',
  'CoreMIDI',
  'CoreML',
  'CoreMotion',
  'CoreNFC',
  'CoreServices',
  'CoreSpotlight',
  'CoreTelephony',
  'CoreText',
  'CoreTransferable',
  'CoreVideo',
  'CoreWLAN',
  'CreateML',
  'CreateMLComponents',
  'CryptoKit',
  'CryptoTokenKit',
  'DarwinNotify',
  'DataDetection',
  'DeclaredAgeRange',
  'DeveloperToolsSupport',
  'DeviceActivity',
  'DeviceCheck',
  'DeviceDiscoveryExtension',
  'DeviceDiscoveryUI',
  'DiskArbitration',
  'Dispatch',
  'Distributed',
  'dnssd',
  'DockKit',
  'DriverKit',
  'EndpointSecurity',
  'EnergyKit',
  'EventKit',
  'EventKitUI',
  'ExceptionHandling',
  'ExecutionPolicy',
  'ExposureNotification',
  'ExtensionFoundation',
  'ExtensionKit',
  'ExternalAccessory',
  'FamilyControls',
  'FileProvider',
  'FileProviderUI',
  'FinanceKit',
  'FinanceKitUI',
  'FinderSync',
  'ForceFeedback',
  'Foundation',
  'FoundationModels',
  'FSKit',
  'GameController',
  'GameKit',
  'GameplayKit',
  'GameSave',
  'GeoToolbox',
  'GLKit',
  'GroupActivities',
  'GSS',
  'HealthKit',
  'HIDDriverKit',
  'HomeKit',
  'hvf',
  'Hypervisor',
  'iAd',
  'IdentityDocumentServices',
  'IdentityDocumentServicesUI',
  'ImageCaptureCore',
  'ImageIO',
  'ImagePlayground',
  'ImmersiveMediaSupport',
  'InputMethodKit',
  'IOBluetooth',
  'IOBluetoothUI',
  'IOKit',
  'IOSurface',
  'IOUSBHost',
  'iTunesLibrary',
  'JavaScriptCore',
  'JournalingSuggestions',
  'Kernel',
  'KernelManagement',
  'LatentSemanticMapping',
  'LightweightCodeRequirements',
  'LinkPresentation',
  'LiveCommunicationKit',
  'LocalAuthentication',
  'LocalAuthenticationEmbeddedUI',
  'LockedCameraCapture',
  'MailKit',
  'ManagedApp',
  'ManagedAppDistribution',
  'ManagedSettings',
  'ManagedSettingsUI',
  'MapKit',
  'MarketplaceKit',
  'Matter',
  'MatterSupport',
  'MediaAccessibility',
  'MediaExtension',
  'MediaLibrary',
  'MediaPlayer',
  'MediaSetup',
  'MediaToolbox',
  'MessageUI',
  'Messages',
  'Metal',
  'MetalFX',
  'MetalKit',
  'MetalPerformanceShaders',
  'MetalPerformanceShadersGraph',
  'MetricKit',
  'MLCompute',
  'ModelIO',
  'MultipeerConnectivity',
  'MusicKit',
  'NaturalLanguage',
  'NearbyInteraction',
  'Network',
  'NetworkExtension',
  'NotificationCenter',
  'ObjectiveC',
  'Observation',
  'OpenDirectory',
  'OpenGLES',
  'os',
  'OSLog',
  'ParavirtualizedGraphics',
  'PassKit',
  'PCIDriverKit',
  'PDFKit',
  'PencilKit',
  'PermissionKit',
  'PHASE',
  'PhotoKit',
  'PlaygroundSupport',
  'PreferencePanes',
  'ProximityReader',
  'PushKit',
  'PushToTalk',
  'Quartz',
  'QuickLook',
  'QuickLookThumbnailing',
  'QuickLookUI',
  'RealityKit',
  'RegexBuilder',
  'RelevanceKit',
  'ReplayKit',
  'RoomPlan',
  'SafariServices',
  'SafetyKit',
  'SceneKit',
  'ScreenCaptureKit',
  'ScreenSaver',
  'ScreenTime',
  'ScriptingBridge',
  'Security',
  'SecurityFoundation',
  'SecurityInterface',
  'SensitiveContentAnalysis',
  'SensorKit',
  'ServiceManagement',
  'ShaderGraph',
  'ShazamKit',
  'SiriKit',
  'Social',
  'SoundAnalysis',
  'Spatial',
  'Speech',
  'SpriteKit',
  'StoreKit',
  'StoreKitTest',
  'Swift',
  'SwiftCharts',
  'SwiftData',
  'SwiftUI',
  'Symbols',
  'Synchronization',
  'System',
  'SystemConfiguration',
  'SystemExtensions',
  'TabletopKit',
  'TabularData',
  'TelephonyMessagingKit',
  'ThreadNetwork',
  'TipKit',
  'TouchController',
  'Translation',
  'TranslationUIProvider',
  'TVMLKit',
  'TVMLKitJS',
  'TVServices',
  'TVUIKit',
  'UIKit',
  'UniformTypeIdentifiers',
  'UserNotifications',
  'UserNotificationsUI',
  'VideoSubscriberAccount',
  'VideoToolbox',
  'Virtualization',
  'Vision',
  'VisionKit',
  'VisualIntelligence',
  'vmnet',
  'WatchConnectivity',
  'WatchKit',
  'WeatherKit',
  'WebKit',
  'WidgetKit',
  'WiFiAware',
  'WirelessInsights',
  'WorkoutKit',
  'XcodeKit',
  'xcselect',
  'XPC',
]);

/**
 * Checks if the given name conflicts with an Apple framework.
 */
export function isAppleFramework(name: string): boolean {
  return APPLE_FRAMEWORKS.has(name);
}

/**
 * Returns a safe module name by prefixing with "Expo" if it conflicts with an Apple framework.
 * Returns the original name and whether it was renamed.
 */
export function ensureSafeModuleName(name: string): { name: string; wasRenamed: boolean } {
  if (isAppleFramework(name)) {
    return { name: `Expo${name}`, wasRenamed: true };
  }
  return { name, wasRenamed: false };
}
